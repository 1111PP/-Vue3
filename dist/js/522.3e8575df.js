"use strict";(self["webpackChunkvue3_waimai"]=self["webpackChunkvue3_waimai"]||[]).push([[522],{8921:function(e,l,t){t.r(l),t.d(l,{default:function(){return Ne}});var a=t(458),o=t(6252),n=t(9963),i=t(2262),s=t(4719),r=t(8443),u=t(293),c=t(3466),d=t(2639),m=t(5314),v=t(6846);const[p,h,f]=(0,s["do"])("picker"),g=e=>e.find((e=>!e.disabled))||e[0];function b(e,l){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(l.children in t)return"cascade"}return"default"}function y(e,l){l=(0,d.uZ)(l,0,e.length);for(let t=l;t<e.length;t++)if(!e[t].disabled)return t;for(let t=l-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const w=(e,l,t)=>void 0!==l&&!!e.find((e=>e[t.value]===l));function S(e,l,t){const a=e.findIndex((e=>e[t.value]===l)),o=y(e,a);return e[o]}function x(e,l,t){const a=[];let o={[l.children]:e},n=0;while(o&&o[l.children]){const e=o[l.children],i=t.value[n];if(o=(0,u.Xq)(i)?S(e,i,l):void 0,!o&&e.length){const t=g(e)[l.value];o=S(e,t,l)}n++,a.push(e)}return a}function C(e){const{transform:l}=window.getComputedStyle(e),t=l.slice(7,l.length-1).split(", ")[5];return Number(t)}function V(e){return(0,u.l7)({text:"text",value:"value",children:"children"},e)}var k=t(590),B=t(1116),W=t(4409);const D=200,O=300,F=15,[T,H]=(0,s["do"])("picker-column"),I=Symbol(T);var P=(0,o.aZ)({name:T,props:{value:r.Or,fields:(0,r.ir)(Object),options:(0,r.Ce)(),readonly:Boolean,allowHtml:Boolean,optionHeight:(0,r.ir)(Number),swipeDuration:(0,r.ir)(r.Or),visibleOptionNum:(0,r.ir)(r.Or)},emits:["change","clickOption","scrollInto"],setup(e,{emit:l,slots:t}){let a,n,s,r,u;const m=(0,i.iH)(),p=(0,i.iH)(),h=(0,i.iH)(0),f=(0,i.iH)(0),g=(0,W.o)(),b=()=>e.options.length,w=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,S=t=>{let o=y(e.options,t);const n=-o*e.optionHeight,i=()=>{o>b()-1&&(o=y(e.options,t));const a=e.options[o][e.fields.value];a!==e.value&&l("change",a)};a&&n!==h.value?u=i:i(),h.value=n},x=()=>e.readonly||!e.options.length,V=t=>{a||x()||(u=null,f.value=D,S(t),l("clickOption",e.options[t]))},B=l=>(0,d.uZ)(Math.round(-l/e.optionHeight),0,b()-1),T=(0,o.Fl)((()=>B(h.value))),P=(l,t)=>{const a=Math.abs(l/t);l=h.value+a/.003*(l<0?-1:1);const o=B(l);f.value=+e.swipeDuration,S(o)},A=()=>{a=!1,f.value=0,u&&(u(),u=null)},N=e=>{if(!x()){if(g.start(e),a){const e=C(p.value);h.value=Math.min(0,e-w())}f.value=0,n=h.value,s=Date.now(),r=n,u=null}},E=t=>{if(x())return;g.move(t),g.isVertical()&&(a=!0,(0,v.PF)(t,!0));const o=(0,d.uZ)(n+g.deltaY.value,-b()*e.optionHeight,e.optionHeight),i=B(o);i!==T.value&&l("scrollInto",e.options[i]),h.value=o;const u=Date.now();u-s>O&&(s=u,r=o)},R=()=>{if(x())return;const e=h.value-r,l=Date.now()-s,t=l<O&&Math.abs(e)>F;if(t)return void P(e,l);const o=B(h.value);f.value=D,S(o),setTimeout((()=>{a=!1}),0)},$=()=>{const l={height:`${e.optionHeight}px`};return e.options.map(((a,n)=>{const i=a[e.fields.text],{disabled:s}=a,r=a[e.fields.value],u={role:"button",style:l,tabindex:s?-1:0,class:[H("item",{disabled:s,selected:r===e.value}),a.className],onClick:()=>V(n)},c={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:i};return(0,o.Wm)("li",u,[t.option?t.option(a,n):(0,o.Wm)("div",c,null)])}))};return(0,k.NB)(I),(0,c.F)({stopMomentum:A}),(0,o.m0)((()=>{const l=a?Math.floor(-h.value/e.optionHeight):e.options.findIndex((l=>l[e.fields.value]===e.value)),t=y(e.options,l),o=-t*e.optionHeight;a&&t<l&&A(),h.value=o})),(0,k.OR)("touchmove",E,{target:m}),()=>(0,o.Wm)("div",{ref:m,class:H(),onTouchstartPassive:N,onTouchend:R,onTouchcancel:R},[(0,o.Wm)("ul",{ref:p,style:{transform:`translate3d(0, ${h.value+w()}px, 0)`,transitionDuration:`${f.value}ms`,transitionProperty:f.value?"all":"none"},class:H("wrapper"),onTransitionend:A},[$()])])}});const[A]=(0,s["do"])("picker-toolbar"),N={title:String,cancelButtonText:String,confirmButtonText:String},E=["cancel","confirm","title","toolbar"],R=Object.keys(N);var $=(0,o.aZ)({name:A,props:N,emits:["confirm","cancel"],setup(e,{emit:l,slots:t}){const a=()=>t.title?t.title():e.title?(0,o.Wm)("div",{class:[h("title"),"van-ellipsis"]},[e.title]):void 0,n=()=>l("cancel"),i=()=>l("confirm"),s=()=>{const l=e.cancelButtonText||f("cancel");return(0,o.Wm)("button",{type:"button",class:[h("cancel"),m.e9],onClick:n},[t.cancel?t.cancel():l])},r=()=>{const l=e.confirmButtonText||f("confirm");return(0,o.Wm)("button",{type:"button",class:[h("confirm"),m.e9],onClick:i},[t.confirm?t.confirm():l])};return()=>(0,o.Wm)("div",{class:h("toolbar")},[t.toolbar?t.toolbar():[s(),a(),r()]])}});const M=(e,l)=>{const t=(0,i.iH)(e());return(0,o.YP)(e,(e=>{e!==t.value&&(t.value=e)})),(0,o.YP)(t,(t=>{t!==e()&&l(t)})),t};var j=t(4545),Z=t(9530);const[L,Y]=(0,s["do"])("picker-group"),z=Symbol(L),U=(0,u.l7)({tabs:(0,r.Ce)(),activeTab:(0,r.SI)(0),nextStepText:String},N);(0,o.aZ)({name:L,props:U,emits:["confirm","cancel","update:activeTab"],setup(e,{emit:l,slots:t}){const a=M((()=>e.activeTab),(e=>l("update:activeTab",e))),{children:n,linkChildren:i}=(0,k.$E)(z);i();const s=()=>+a.value<e.tabs.length-1&&e.nextStepText,r=()=>{s()?a.value=+a.value+1:l("confirm",n.map((e=>e.confirm())))},c=()=>l("cancel");return()=>{var l;const n=null==(l=t.default)?void 0:l.call(t),i=s()?e.nextStepText:e.confirmButtonText;return(0,o.Wm)("div",{class:Y()},[(0,o.Wm)($,{title:e.title,cancelButtonText:e.cancelButtonText,confirmButtonText:i,onConfirm:r,onCancel:c},(0,u.ei)(t,E)),(0,o.Wm)(Z.mQ,{active:a.value,"onUpdate:active":e=>a.value=e,class:Y("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[e.tabs.map(((e,l)=>(0,o.Wm)(j.OK,{title:e,titleClass:Y("tab-title")},{default:()=>[null==n?void 0:n[l]]})))]})])}}});const q=(0,u.l7)({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:(0,r.SI)(44),showToolbar:r.J5,swipeDuration:(0,r.SI)(1e3),visibleOptionNum:(0,r.SI)(6)},N),_=(0,u.l7)({},q,{columns:(0,r.Ce)(),modelValue:(0,r.Ce)(),toolbarPosition:(0,r.SQ)("top"),columnsFieldNames:Object});var J=(0,o.aZ)({name:p,props:_,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:l,slots:t}){const a=(0,i.iH)(),n=(0,i.iH)(e.modelValue.slice(0)),{parent:s}=(0,k.NB)(z),{children:r,linkChildren:p}=(0,k.$E)(I);p();const f=(0,o.Fl)((()=>V(e.columnsFieldNames))),y=(0,o.Fl)((()=>(0,d.LU)(e.optionHeight))),C=(0,o.Fl)((()=>b(e.columns,f.value))),W=(0,o.Fl)((()=>{const{columns:l}=e;switch(C.value){case"multiple":return l;case"cascade":return x(l,f.value,n);default:return[l]}})),D=(0,o.Fl)((()=>W.value.some((e=>e.length)))),O=(0,o.Fl)((()=>W.value.map(((e,l)=>S(e,n.value[l],f.value))))),F=(0,o.Fl)((()=>W.value.map(((e,l)=>e.findIndex((e=>e[f.value.value]===n.value[l])))))),T=(e,l)=>{if(n.value[e]!==l){const t=n.value.slice(0);t[e]=l,n.value=t}},H=()=>({selectedValues:n.value.slice(0),selectedOptions:O.value,selectedIndexes:F.value}),A=(e,t)=>{T(t,e),"cascade"===C.value&&n.value.forEach(((e,l)=>{const t=W.value[l];w(t,e,f.value)||T(l,t.length?t[0][f.value.value]:void 0)})),(0,o.Y3)((()=>{l("change",(0,u.l7)({columnIndex:t},H()))}))},N=(e,t)=>{const a={columnIndex:t,currentOption:e};l("clickOption",(0,u.l7)(H(),a)),l("scrollInto",a)},M=()=>{r.forEach((e=>e.stopMomentum()));const e=H();return(0,o.Y3)((()=>{l("confirm",e)})),e},j=()=>l("cancel",H()),Z=()=>W.value.map(((a,i)=>(0,o.Wm)(P,{value:n.value[i],fields:f.value,options:a,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:y.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:e=>A(e,i),onClickOption:e=>N(e,i),onScrollInto:e=>{l("scrollInto",{currentOption:e,columnIndex:i})}},{option:t.option}))),L=e=>{if(D.value){const l={height:`${y.value}px`},t={backgroundSize:`100% ${(e-y.value)/2}px`};return[(0,o.Wm)("div",{class:h("mask"),style:t},null),(0,o.Wm)("div",{class:[m.pj,h("frame")],style:l},null)]}},Y=()=>{const l=y.value*+e.visibleOptionNum,t={height:`${l}px`};return(0,o.Wm)("div",{ref:a,class:h("columns"),style:t},[Z(),L(l)])},U=()=>{if(e.showToolbar&&!s)return(0,o.Wm)($,(0,o.dG)((0,u.ei)(e,R),{onConfirm:M,onCancel:j}),(0,u.ei)(t,E))};let q;(0,o.YP)(W,(e=>{e.forEach(((e,l)=>{e.length&&!w(e,n.value[l],f.value)&&T(l,g(e)[f.value.value])}))}),{immediate:!0}),(0,o.YP)((()=>e.modelValue),(e=>{(0,u.$c)(e,n.value)||(0,u.$c)(e,q)||(n.value=e.slice(0),q=e.slice(0))}),{deep:!0}),(0,o.YP)(n,(t=>{(0,u.$c)(t,e.modelValue)||(q=t.slice(0),l("update:modelValue",q))}),{immediate:!0}),(0,k.OR)("touchmove",v.PF,{target:a});const _=()=>O.value;return(0,c.F)({confirm:M,getSelectedOptions:_}),()=>{var l,a;return(0,o.Wm)("div",{class:h()},["top"===e.toolbarPosition?U():null,e.loading?(0,o.Wm)(B.gb,{class:h("loading")},null):null,null==(l=t["columns-top"])?void 0:l.call(t),Y(),null==(a=t["columns-bottom"])?void 0:a.call(t),"bottom"===e.toolbarPosition?U():null])}}});const G="000000",K=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],Q=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],X=(e="",l=G,t=void 0)=>({text:e,value:l,children:t});function ee({areaList:e,columnsNum:l,columnsPlaceholder:t}){const{city_list:a={},county_list:o={},province_list:n={}}=e,i=+l>1,s=+l>2,r=()=>{if(i)return t.length?[X(t[0],G,s?[]:void 0)]:[]},u=new Map;Object.keys(n).forEach((e=>{u.set(e.slice(0,2),X(n[e],e,r()))}));const c=new Map;if(i){const e=()=>{if(s)return t.length?[X(t[1])]:[]};Object.keys(a).forEach((l=>{const t=X(a[l],l,e());c.set(l.slice(0,4),t);const o=u.get(l.slice(0,2));o&&o.children.push(t)}))}s&&Object.keys(o).forEach((e=>{const l=c.get(e.slice(0,4));l&&l.children.push(X(o[e],e))}));const d=Array.from(u.values());if(t.length){const e=s?[X(t[2])]:void 0,l=i?[X(t[1],G,e)]:void 0;d.unshift(X(t[0],G,l))}return d}const le=(0,a.n)(J);const[te,ae]=(0,s["do"])("area"),oe=(0,u.l7)({},(0,u.ei)(q,Q),{modelValue:String,columnsNum:(0,r.SI)(3),columnsPlaceholder:(0,r.Ce)(),areaList:{type:Object,default:()=>({})}});var ne=(0,o.aZ)({name:te,props:oe,emits:["change","confirm","cancel","update:modelValue"],setup(e,{emit:l,slots:t}){const a=(0,i.iH)([]),n=(0,i.iH)(),s=(0,o.Fl)((()=>ee(e))),r=(...e)=>l("change",...e),d=(...e)=>l("cancel",...e),m=(...e)=>l("confirm",...e);return(0,o.YP)(a,(t=>{const a=t.length?t[t.length-1]:"";a&&a!==e.modelValue&&l("update:modelValue",a)}),{deep:!0}),(0,o.YP)((()=>e.modelValue),(l=>{if(l){const t=a.value.length?a.value[a.value.length-1]:"";l!==t&&(a.value=[`${l.slice(0,2)}0000`,`${l.slice(0,4)}00`,l].slice(0,+e.columnsNum))}else a.value=[]}),{immediate:!0}),(0,c.F)({confirm:()=>{var e;return null==(e=n.value)?void 0:e.confirm()},getSelectedOptions:()=>{var e;return(null==(e=n.value)?void 0:e.getSelectedOptions())||[]}}),()=>(0,o.Wm)(le,(0,o.dG)({ref:n,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,class:ae(),columns:s.value,onChange:r,onCancel:d,onConfirm:m},(0,u.ei)(e,Q)),(0,u.ei)(t,K))}});const ie=(0,a.n)(ne);var se=t(5160),re=t(5185),ue=t(5778),ce=t(4814),de=t(781),me=t(6907);const[ve,pe]=(0,s["do"])("switch"),he={size:r.Or,loading:Boolean,disabled:Boolean,modelValue:r.Vg,activeColor:String,inactiveColor:String,activeValue:{type:r.Vg,default:!0},inactiveValue:{type:r.Vg,default:!1}};var fe=(0,o.aZ)({name:ve,props:he,emits:["change","update:modelValue"],setup(e,{emit:l,slots:t}){const a=()=>e.modelValue===e.activeValue,n=()=>{if(!e.disabled&&!e.loading){const t=a()?e.inactiveValue:e.activeValue;l("update:modelValue",t),l("change",t)}},i=()=>{if(e.loading){const l=a()?e.activeColor:e.inactiveColor;return(0,o.Wm)(B.gb,{class:pe("loading"),color:l},null)}if(t.node)return t.node()};return(0,k.aM)((()=>e.modelValue)),()=>{var l;const{size:s,loading:r,disabled:u,activeColor:c,inactiveColor:m}=e,v=a(),p={fontSize:(0,d.Nn)(s),backgroundColor:v?c:m};return(0,o.Wm)("div",{role:"switch",class:pe({on:v,loading:r,disabled:u}),style:p,tabindex:u?void 0:0,"aria-checked":v,onClick:n},[(0,o.Wm)("div",{class:pe("node")},[i()]),null==(l=t.background)?void 0:l.call(t)])}}});const ge=(0,a.n)(fe);const[be,ye]=(0,s["do"])("address-edit-detail"),we=(0,s["do"])("address-edit")[2];var Se=(0,o.aZ)({name:be,props:{show:Boolean,rows:r.Or,value:String,rules:Array,focused:Boolean,maxlength:r.Or,searchResult:Array,showSearchResult:Boolean},emits:["blur","focus","input","selectSearch"],setup(e,{emit:l}){const t=(0,i.iH)(),a=()=>e.focused&&e.searchResult&&e.showSearchResult,n=e=>{l("selectSearch",e),l("input",`${e.address||""} ${e.name||""}`.trim())},s=()=>{if(!a())return;const{searchResult:l}=e;return l.map((e=>(0,o.Wm)(se.bL,{clickable:!0,key:(e.name||"")+(e.address||""),icon:"location-o",title:e.name,label:e.address,class:ye("search-item"),border:!1,onClick:()=>n(e)},null)))},r=e=>l("blur",e),u=e=>l("focus",e),c=e=>l("input",e);return()=>{if(e.show)return(0,o.Wm)(o.HY,null,[(0,o.Wm)(ue.gN,{autosize:!0,clearable:!0,ref:t,class:ye(),rows:e.rows,type:"textarea",rules:e.rules,label:we("addressDetail"),border:!a(),maxlength:e.maxlength,modelValue:e.value,placeholder:we("addressDetail"),onBlur:r,onFocus:u,"onUpdate:modelValue":c},null),s()])}}});const[xe,Ce,Ve]=(0,s["do"])("address-edit"),ke={name:"",tel:"",city:"",county:"",country:"",province:"",areaCode:"",isDefault:!1,addressDetail:""},Be={areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showArea:r.J5,showDetail:r.J5,showDelete:Boolean,disableArea:Boolean,searchResult:Array,telMaxlength:r.Or,showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,detailRows:(0,r.SI)(1),detailMaxlength:(0,r.SI)(200),areaColumnsPlaceholder:(0,r.Ce)(),addressInfo:{type:Object,default:()=>(0,u.l7)({},ke)},telValidator:{type:Function,default:u.tq}};var We=(0,o.aZ)({name:xe,props:Be,emits:["save","focus","delete","clickArea","changeArea","changeDetail","selectSearch","changeDefault"],setup(e,{emit:l,slots:t}){const a=(0,i.iH)(),s=(0,i.qj)({}),r=(0,i.iH)(!1),d=(0,i.iH)(!1),m=(0,o.Fl)((()=>(0,u.Kn)(e.areaList)&&Object.keys(e.areaList).length)),v=(0,o.Fl)((()=>{const{province:e,city:l,county:t,areaCode:a}=s;if(a){const a=[e,l,t];return e&&e===l&&a.splice(1,1),a.filter(Boolean).join("/")}return""})),p=(0,o.Fl)((()=>{var l;return(null==(l=e.searchResult)?void 0:l.length)&&d.value})),h=e=>{d.value="addressDetail"===e,l("focus",e)},f=(0,o.Fl)((()=>{const{validator:l,telValidator:t}=e,a=(e,t)=>({validator:a=>{if(l){const t=l(e,a);if(t)return t}return!!a||t}});return{name:[a("name",Ve("nameEmpty"))],tel:[a("tel",Ve("telInvalid")),{validator:t,message:Ve("telInvalid")}],areaCode:[a("areaCode",Ve("areaEmpty"))],addressDetail:[a("addressDetail",Ve("addressEmpty"))]}})),g=()=>l("save",s),b=e=>{s.addressDetail=e,l("changeDetail",e)},y=e=>{s.province=e[0].text,s.city=e[1].text,s.county=e[2].text},w=({selectedValues:e,selectedOptions:t})=>{e.some((e=>e===G))?(0,de.CF)(Ve("areaEmpty")):(r.value=!1,y(t),l("changeArea",t))},S=()=>l("delete",s),x=e=>{s.areaCode=e||""},C=()=>{setTimeout((()=>{d.value=!1}))},V=e=>{s.addressDetail=e},k=()=>{if(e.showSetDefault){const e={"right-icon":()=>(0,o.Wm)(ge,{modelValue:s.isDefault,"onUpdate:modelValue":e=>s.isDefault=e,onChange:e=>l("changeDefault",e)},null)};return(0,o.wy)((0,o.Wm)(se.bL,{center:!0,border:!1,title:Ve("defaultAddress"),class:Ce("default")},e),[[n.F8,!p.value]])}};return(0,c.F)({setAreaCode:x,setAddressDetail:V}),(0,o.YP)((()=>e.addressInfo),(e=>{(0,u.l7)(s,ke,e),(0,o.Y3)((()=>{var e;const l=null==(e=a.value)?void 0:e.getSelectedOptions();l&&l.every((e=>e&&e.value!==G))&&y(l)}))}),{deep:!0,immediate:!0}),()=>{const{disableArea:i}=e;return(0,o.Wm)(re.l0,{class:Ce(),onSubmit:g},{default:()=>{var u;return[(0,o.Wm)("div",{class:Ce("fields")},[(0,o.Wm)(ue.gN,{modelValue:s.name,"onUpdate:modelValue":e=>s.name=e,clearable:!0,label:Ve("name"),rules:f.value.name,placeholder:Ve("name"),onFocus:()=>h("name")},null),(0,o.Wm)(ue.gN,{modelValue:s.tel,"onUpdate:modelValue":e=>s.tel=e,clearable:!0,type:"tel",label:Ve("tel"),rules:f.value.tel,maxlength:e.telMaxlength,placeholder:Ve("tel"),onFocus:()=>h("tel")},null),(0,o.wy)((0,o.Wm)(ue.gN,{readonly:!0,label:Ve("area"),"is-link":!i,modelValue:v.value,rules:f.value.areaCode,placeholder:e.areaPlaceholder||Ve("area"),onFocus:()=>h("areaCode"),onClick:()=>{l("clickArea"),r.value=!i}},null),[[n.F8,e.showArea]]),(0,o.Wm)(Se,{show:e.showDetail,rows:e.detailRows,rules:f.value.addressDetail,value:s.addressDetail,focused:d.value,maxlength:e.detailMaxlength,searchResult:e.searchResult,showSearchResult:e.showSearchResult,onBlur:C,onFocus:()=>h("addressDetail"),onInput:b,onSelectSearch:e=>l("selectSearch",e)},null),null==(u=t.default)?void 0:u.call(t)]),k(),(0,o.wy)((0,o.Wm)("div",{class:Ce("buttons")},[(0,o.Wm)(me.zx,{block:!0,round:!0,type:"primary",text:e.saveButtonText||Ve("save"),class:Ce("button"),loading:e.isSaving,nativeType:"submit"},null),e.showDelete&&(0,o.Wm)(me.zx,{block:!0,round:!0,class:Ce("button"),loading:e.isDeleting,text:e.deleteButtonText||Ve("delete"),onClick:S},null)]),[[n.F8,!p.value]]),(0,o.Wm)(ce.GI,{show:r.value,"onUpdate:show":e=>r.value=e,round:!0,teleport:"body",position:"bottom",lazyRender:!1},{default:()=>[(0,o.Wm)(ie,{modelValue:s.areaCode,"onUpdate:modelValue":e=>s.areaCode=e,ref:a,loading:!m.value,areaList:e.areaList,columnsPlaceholder:e.areaColumnsPlaceholder,onConfirm:w,onCancel:()=>{r.value=!1}},null)]})]}})}}});const De=(0,a.n)(We);t(1958),t(368),t(6742),t(3094),t(7984),t(2939),t(1452),t(6196),t(2666),t(770),t(1771),t(9137),t(1088),t(5338),t(1564);var Oe=t(2056);function Fe(e,l,t,a,n,i){const s=Oe.Z,r=De;return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s,{title:a.handleTitle},null,8,["title"]),(0,o.Wm)(r,{"area-list":e.areaList,"show-postal":"","show-delete":"","show-set-default":"","show-search-result":"","address-info":e.addressInfo,"area-columns-placeholder":["请选择","请选择","请选择"],onSave:a.onSave,onDelete:a.onDelete},null,8,["area-list","address-info","onSave","onDelete"])])}var Te=t(3907),He=t(2201),Ie={components:{Header:Oe.Z},setup(){const e=(0,He.yj)(),l=(0,He.tv)(),t=(0,Te.oR)(),a=(0,i.qj)({areaList:{province_list:{11e4:"广东省",12e4:"浙江省",13e4:"上海市"},city_list:{110100:"广州市",110200:"深圳市",120100:"杭州市",120200:"宁波市",130100:"上海市"},county_list:{110101:"天河区",110102:"海珠区",120102:"上城区",130102:"下城区",130101:"浦东新区"}},addressInfo:[]}),n=(0,o.Fl)((()=>{const l="add"===e.query.type?"新增地址":"编辑地址";return l})),s=a=>{"add"===e.query.type?(a.id=`100${t.state.userAddress.length+1}`,t.commit("addAddress",a),console.log("add Address info",a),l.back()):(t.commit("editAddress",a),console.log("edit Address info",a),l.back()),(0,de.CF)(""+("add"===e.query.id?"新增成功":"修改成功"))},r=e=>{t.commit("deleteaddress",e),(0,de.CF)("Delete successsful ！"),l.back()},u=()=>{t.state.userAddress.forEach((l=>{l.id===Number(e.query.id)&&(a.addressInfo=l)}))};return(0,o.bv)((()=>{u()})),{router:l,route:e,handleTitle:n,...(0,i.BK)(a),onSave:s,onDelete:r}}},Pe=t(3744);const Ae=(0,Pe.Z)(Ie,[["render",Fe]]);var Ne=Ae},5185:function(e,l,t){t.d(l,{l0:function(){return h}});var a=t(458),o=t(6252),n=t(4719),i=t(8443),s=t(5314),r=t(6846),u=t(590),c=t(3466);const[d,m]=(0,n["do"])("form"),v={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:i.Or,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:i.J5,showErrorMessage:i.J5,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var p=(0,o.aZ)({name:d,props:v,emits:["submit","failed"],setup(e,{emit:l,slots:t}){const{children:a,linkChildren:n}=(0,u.$E)(s.WN),i=e=>e?a.filter((l=>e.includes(l.name))):a,d=e=>new Promise(((l,t)=>{const a=[],o=i(e);o.reduce(((e,l)=>e.then((()=>{if(!a.length)return l.validate().then((e=>{e&&a.push(e)}))}))),Promise.resolve()).then((()=>{a.length?t(a):l()}))})),v=e=>new Promise(((l,t)=>{const a=i(e);Promise.all(a.map((e=>e.validate()))).then((e=>{e=e.filter(Boolean),e.length?t(e):l()}))})),p=e=>{const l=a.find((l=>l.name===e));return l?new Promise(((e,t)=>{l.validate().then((l=>{l?t(l):e()}))})):Promise.reject()},h=l=>"string"===typeof l?p(l):e.validateFirst?d(l):v(l),f=e=>{"string"===typeof e&&(e=[e]);const l=i(e);l.forEach((e=>{e.resetValidation()}))},g=()=>a.reduce(((e,l)=>(e[l.name]=l.getValidationStatus(),e)),{}),b=(e,l)=>{a.some((t=>t.name===e&&(t.$el.scrollIntoView(l),!0)))},y=()=>a.reduce(((e,l)=>(void 0!==l.name&&(e[l.name]=l.formValue.value),e)),{}),w=()=>{const t=y();h().then((()=>l("submit",t))).catch((a=>{l("failed",{values:t,errors:a}),e.scrollToError&&a[0].name&&b(a[0].name)}))},S=e=>{(0,r.PF)(e),w()};return n({props:e}),(0,c.F)({submit:w,validate:h,getValues:y,scrollToField:b,resetValidation:f,getValidationStatus:g}),()=>{var e;return(0,o.Wm)("form",{class:m(),onSubmit:S},[null==(e=t.default)?void 0:e.call(t)])}}});const h=(0,a.n)(p)}}]);
//# sourceMappingURL=522.3e8575df.js.map