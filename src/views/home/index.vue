<template>
  <div class="home">
    <div class="content">
      <!-- Â§¥ÈÉ®Âå∫Âüü -->
      <div class="header">
        <div class="left">ÁæéÂõ¢Â§ñÂçñ</div>
        <div class="right">
          <van-icon
            name="location-o"
            size="15"
          />
          <span @click="toAddress">ÂÆÅÊ≥¢Â∑•Á®ãÂ≠¶Èô¢</span>
          <van-icon
            name="arrow"
            size="15"
          />
        </div>
      </div>
      <!-- ‰∏ªÈ°µÈù¢Âå∫Âüü -->
      <div class="main">
        <div class="main-bg">
          <!-- ÊêúÁ¥¢Âå∫Âüü -->
          <div class="search">
            <input type="text" />
            <span class="search-text">ÊêúÁ¥¢</span>
          </div>
          <!-- ÂàÜÁ±ªÂå∫Âüü -->
          <div class="sort">
            <!-- Â§ßÂàÜÁ±ª -->
            <div class="big-sort">
              <!-- ÈÅçÂéÜdataÊï∞ÊçÆÊ∏≤ÊüìÂ§ßÁöÑÂàÜÁ±ªÂÜÖÂÆπ -->
              <div
                v-for="(item, index) in big_sort"
                :key="index"
              >
                <svg
                  class="icon"
                  aria-hidden="true"
                >
                  <use :xlink:href="`#${item.icon}`"></use>
                </svg>
                <span> {{ item.name }}</span>
              </div>
            </div>
            <!-- Â∞èÂàÜÁ±ª -->
            <div class="small-sort">
              <div
                v-for="(item, index) in small_sort"
                :key="index"
              >
                <svg
                  class="icon"
                  aria-hidden="true"
                >
                  <use :xlink:href="`#${item.icon}`"></use>
                </svg>
                <span> {{ item.name }}</span>
              </div>
            </div>
          </div>
        </div>
        <!-- tabsÊ†è -->
        <van-tabs
          v-model:active="active"
          class="van-tabs"
          @click="changeTabs(active)"
        >
          <van-tab
            v-for="(item, index) in centent_nav_list"
            :title="item.tab"
            :key="index"
          >
            <!-- ÂØπ‰∫éÂàóË°®‰∏≠ÊØè‰∏ÄÊù°ÂïÜÂìÅÔºåÈÄâÊã©ÂçïÁã¨Â∞ÅË£Ö‰∏Ä‰∏™ÁªÑ‰ª∂ -->
            <NavListItem :item="item"></NavListItem>

            <!-- <div class=" tabItem" v-for="(i, index) in item.data" :key="index">
                        <div class="pic">
                            <img :src="i.pic" class="p" alt="">
                        </div>
                        <div class="content">
                            <ul>
                                <li>{{ i.title }}</li>
                                <li>Ôø•{{ i.sales }}</li>
                                <li>Ëµ∑ÈÄÅ‰ª∑Ôºö{{ i.price }}</li>
                                <li>
                                    <div class="tip">
                                        {{ i.label[0] }}
                                    </div>
                                    <div class="tip">
                                        {{ i.label[1] }}
                                    </div>
                                </li>
                            </ul>
                        </div>
                        </div> -->
          </van-tab>
        </van-tabs>
      </div>
    </div>
    <Footer></Footer>
  </div>
</template>

<script>
import Footer from '../../components/Footer.vue'
import NavListItem from './components/NavListItem.vue'
import { useRouter } from 'vue-router'
import { reactive, toRefs, ref, onMounted } from 'vue'
// import axios from 'axios'
// import { getHomeDataAPI } from '@/api/allAPI'
import { getApiHomeData } from '@/api/apis'
export default {
  name: 'Home',
  setup() {
    const router = useRouter()
    // tabsÊ†èÁöÑÁ¥¢Âºï
    const active = ref(0)
    // ‰∏∫Êï∞ÊçÆÊ∑ªÂä†ÂìçÂ∫îÂºè üí°ÂêéÊúüÁî®mockÊ®°ÊãüÊúçÂä°Âô®ÂìçÂ∫îÊï∞ÊçÆ,Âπ∂ÈÄöËøágetHomeDataÂáΩÊï∞‰∏∫dataÂÆåÊàêËµãÂÄºÊìç‰Ωú
    const data = reactive({
      big_sort: [],
      small_sort: [],
      centent_nav_list: [],
      // big_sort: [
      //   {
      //     name: 'ÁæéÈ£ü',
      //     icon: 'icon-meishi',
      //   },
      //   {
      //     name: 'ÁîúÁÇπÈ•ÆÂìÅ',
      //     icon: 'icon-tiandian',
      //   },
      //   {
      //     name: 'Ë∂ÖÂ∏Ç‰æøÂà©',
      //     icon: 'icon-chaoshigouwu',
      //   },
      //   {
      //     name: 'ÁîüÈ≤úÊûúËî¨',
      //     icon: 'icon-shengxian-ganju',
      //   },
      //   {
      //     name: '‰π∞ËçØÁúãÁóÖ',
      //     icon: 'icon-maiyao',
      //   },
      // ],
      // small_sort: [
      //   {
      //     name: 'ÂçàÈ§ê',
      //     icon: 'icon-wucan',
      //   },
      //   {
      //     name: '‰π∞ÈÖí',
      //     icon: 'icon-jiu',
      //   },
      //   {
      //     name: 'Êñ∞È≤úÊ∞¥Êûú',
      //     icon: 'icon-xinxianguoshu_xinxianshuiguopingguo',
      //   },
      //   {
      //     name: 'Ê±âÂ†°Êä´Ëê®',
      //     icon: 'icon-hanbaopisa',
      //   },
      //   {
      //     name: '‰ºëÈó≤È•ÆÂìÅ',
      //     icon: 'icon-xiuxianyinpin',
      //   },
      //   {
      //     name: 'Â§úÂÆµ',
      //     icon: 'icon-yexiao',
      //   },
      //   {
      //     name: 'ÂêêÂè∏',
      //     icon: 'icon-tusi',
      //   },
      //   {
      //     name: 'Ë∑ëËÖø',
      //     icon: 'icon-paotuiAPP',
      //   },
      //   {
      //     name: 'Áæé‰∫∫‰Ω≥‰∏Ω',
      //     icon: 'icon-kouhong',
      //   },
      //   {
      //     name: 'ÂÖ®ÈÉ®ÂàÜÁ±ª',
      //     icon: 'icon-fenlei',
      //   },
      // ],
      // centent_nav_list: [
      //   {
      //     tab: 'Â§©Â§©Á•ûÂà∏',
      //     data: [
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //       {
      //         pic: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.cfcy168.com%2FUploadFiles%2F2020%2F2%2F15904074889874037.jpg&refer=http%3A%2F%2Fwww.cfcy168.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645421933&t=66b58fbba9dce6f6b397e38820de24dc',
      //         title: 'ÈöÜÊ±üÁå™ËÑöÈ•≠',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //     ],
      //   },
      //   {
      //     tab: 'ÂáèÈÖçÈÄÅË¥π',
      //     data: [
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //     ],
      //   },
      //   {
      //     tab: 'ÁÇπËØÑÈ´òÂàÜ',
      //     data: [
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //     ],
      //   },
      //   {
      //     tab: '‰ºöÂëòÊª°Âáè',
      //     data: [
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //       {
      //         pic: 'https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440',
      //         title: 'ÈÖ∏ËèúÈ±º',
      //         sales: '2888',
      //         price: '20',
      //         label: ['Èó®Â∫ó‰∏äÊñ∞', 'Âæà‰∏ãÈ•≠'],
      //       },
      //     ],
      //   },
      // ],
    })
    // ÁÇπÂáªtabsÊ†èÂèØ‰ª•Ëé∑ÂæóÁ¥¢Âºï‰∏ãÊ†áÔºåvantUIÂ∫ìÈÄöËøá v-model:active ÁªëÂÆöÂΩìÂâçÊøÄÊ¥ªÊ†áÁ≠æÂØπÂ∫îÁöÑÁ¥¢ÂºïÂÄºÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂêØÁî®Á¨¨‰∏Ä‰∏™Ê†áÁ≠æ„ÄÇ
    const changeTabs = (num) => {
      console.log(num)
    }

    const toAddress = () => {
      router.push('/createorder')
    }

    // ‰ΩøÁî®mockjsÊ®°ÊãüÊúçÂä°Âô®ÔºåmockÂèØ‰ª•Êã¶Êà™Âà∞ÂâçÁ´ØÂèëÈÄÅÁªôÂêéÁ´ØÊúçÂä°Âô®ÁöÑËØ∑Ê±Ç
    // ÁîüÊàêÊ®°ÊãüÊï∞ÊçÆÈÄöËøáaxiosÂèëÈÄÅËØ∑Ê±ÇÔºåÂπ∂ËøîÂõûÊï∞ÊçÆ
    const getHomeData = () => {
      // üü•‰∫åÊ¨°Â∞ÅË£ÖaxiosÂêéÔºåËã•ËØ∑Ê±ÇÊàêÂäüÔºåÂìçÂ∫îÊã¶Êà™Âô®Áõ¥Êé•ËøîÂõûÊàë‰ª¨ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåÈöèÂêéÁõ¥Êé•ËµãÂÄºÂç≥ÂèØ
      getApiHomeData().then((res) => {
        data.big_sort = res.big_sort
        data.small_sort = res.small_sort
        data.centent_nav_list = res.centent_nav_list
      })
      // üü•Êú™Â∞ÅË£ÖÂâç
      // axios.get('/home/getHomeData').then((res) => {
      //   console.log(res)
      //   // homeDataË°®Á§∫ËØ∑Ê±ÇÂìçÂ∫îÁöÑhomeÁªÑ‰ª∂ÊâÄÈúÄÁöÑÊï∞ÊçÆ
      //   const { code, homeData } = res.data
      //   // Ë°®Á§∫ËØ∑Ê±ÇÊàêÂäü
      //   if (code === 200) {
      //     // ‰∏∫dataÂÆåÊàêËµãÂÄºÊìç‰Ωú
      //     data.big_sort = homeData.big_sort
      //     data.small_sort = homeData.small_sort
      //     data.centent_nav_list = homeData.centent_nav_list
      //   }
      // })
    }

    // üü•Â∞èÂÖîÈ≤úÈ°πÁõÆÈÄâÊã©Âú®utilsÊñá‰ª∂Âíåapi/AllAPIÊñá‰ª∂‰∏≠‰∫åÊ¨°Â∞ÅË£Ö‰∫Üaxios
    // üü•ËøôÊ†∑Ë∞ÉÁî®getHomeDataAPI()Âç≥ÂèØÊãøÂà∞ËØ∑Ê±ÇÊï∞ÊçÆ,‰ΩÜÊòØËøôÈáåË≤å‰ºº‰∏çË°å,ÊâÄÊúâËøòÊòØÈÄâÊã©‰∫Ü‰∏äÈù¢ÁöÑËØ∑Ê±ÇÊñπÂºè
    // const mineAPI = async () => {
    //   const res = await getHomeDataAPI()
    // }

    onMounted(() => {
      getHomeData()
      // mineAPI()
    })

    return {
      ...toRefs(data),
      active,
      changeTabs,
      toAddress,
      getHomeData,
    }
  },
  components: {
    Footer,
    NavListItem,
  },
}
</script>

<style lang="less" scoped>
.home {
  display: flex;
  flex-flow: column;
  height: 100%;

  .content {
    flex: 1;
    // ‰∏ä‰∏ãÂèØÊªëÂä®ÔºåËÆæÁΩÆyËΩ¥
    overflow-y: auto;

    // Â§¥ÈÉ®Âå∫Âüü
    .header {
      //Â§¥ÈÉ®Âå∫ÂüüÁöÑÊ∏êÂèòËâ≤
      background-image: linear-gradient(#ffc400, #fff);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 10px 40px 20px;

      .left {
        font-size: 20px;
        font-weight: 600;
      }

      .right {
        margin: 0 5px;

        span {
          font-size: 14px;
          padding: 0 3px;
        }
      }
    }

    // ‰∏ª‰ΩìÈÉ®ÂàÜ
    .main {
      margin-top: -25px;

      .main-bg {
        background-image: linear-gradient(#fff, #f5f5f5);
        padding: 10px 20px 0px 20px;
        border-radius: 30px 30px 0 0;

        // ÊêúÁ¥¢Âå∫ÂüüÊ†∑Âºè
        .search {
          display: flex;
          justify-content: space-between;
          position: relative;

          input {
            width: 95%;
            border: 1px solid #ffc400;
            border-radius: 20px;
            height: 30px;
          }

          .search-text {
            position: absolute;
            right: 10px;
            background-color: #ffc400;
            border-radius: 16px;
            width: 50px;
            height: 32px;
            line-height: 32px;
            text-align: center;
            font-size: 14px;
          }
        }

        // ÂàÜÁ±ªÂå∫Âüü
        .sort {
          padding: 20px 0;

          // Â§ßÂàÜÁ±ªÊ†∑Âºè
          .big-sort {
            display: flex;

            div {
              flex: 1;
              display: flex;
              flex-flow: column;
              justify-content: center;
              align-items: center;

              .icon {
                width: 35px;
                height: 35px;
                margin-bottom: 5px;
              }

              span {
                font-size: 14px;
              }
            }
          }

          // Â∞èÂàÜÁ±ªÊ†∑Âºè
          .small-sort {
            display: flex;
            flex-flow: wrap;
            margin-top: 15px;

            div {
              display: flex;
              justify-content: center;
              align-items: center;
              flex-flow: column wrap;
              width: 20%;

              .icon {
                width: 30px;
                height: 30px;
                margin: 10px;
              }

              span {
                font-size: 14px;
              }
            }
          }
        }
      }

      .van-tabs {
        padding: 0 20px;
      }
    }
  }
}

/deep/ .van-tabs__wrap {
  border-radius: 13px;
}
</style>
